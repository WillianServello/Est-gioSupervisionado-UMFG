@using cafeservellocontroler.Models.Pessoa.ViewModels
@model List<RevendedorViewModel>
@{
    ViewData["Title"] = "Revendedor";
}
<div style="display: flex; justify-content:center;">
    <div class="container-fluid">
        <h1 class="display-4">Revendedor</h1>

        @*Esse daqui e o BOTAO DE CRIAR REVENDEDOR*@

        <div class="d-flex justify-content-end">
            <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalCriar" onclick="limparFormulario()">
                Novo
            </button>
        </div>


        @*Esse daqui e o modal de CRIAR REVENDEDOR*@

        <div class="modal fade" id="modalCriar" tabindex="-1" aria-labelledby="modalCriarLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="modalCriarLabel">Adicionar Revendedor</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                    </div>
                    <div class="modal-body">
                        @Html.Partial("_Criar", new RevendedorViewModel())
                    </div>
                </div>
            </div>
        </div>
        <br />
        <br />
        <br />
        <br />




        @*Sao mensagens de erro, que pegam as informacoes da controller, são descritas la*@


        @if (TempData["MensagemSucesso"] != null)
        {
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                @TempData["MensagemSucesso"]
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }

        @if (TempData["MensagemErro"] != null)
        {
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                @TempData["MensagemErro"]
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        }





        @*Aqui e a tabela, onde quando for adicionado ira aparecer um novo revendedor*@

        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Codigo</th>
                    <th scope="col">Nome</th>
                    <th scope="col">Telefone</th>
                    <th scope="col">Email</th>
                    <th scope="col">CNPJ</th>
                    <th scope="col">Endereço</th>
                    <th scope="col">Nome Fantasia</th>
                </tr>
            </thead>
            <tbody>
                @if (Model != null && Model.Any())
                {
                    foreach (RevendedorViewModel revendedor in Model)
                    {
                        <tr>
                            <th scope="row">@revendedor.Id</th>
                            <td>@revendedor.Nome</td>
                            <td>@revendedor.Telefone</td>
                            <td>@revendedor.Email</td>
                            <td>@revendedor.Cnpj</td>
                            <td>@revendedor.Endereco</td>
                            <td>@revendedor.NomeFantasia</td>
                            <td>
                                <div role="group">


                                    @*Esse daqui e o modal de EDITAR REVENDEDOR (OBSERVACAO, DEVE FAZER UM JAVASCRIPT PRA CONFIRMAR REALMENTE) *@


                                    <a role="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalEditar-@revendedor.Id">
                                        Editar
                                    </a>

                                    <div class="modal fade" id="modalEditar-@revendedor.Id" tabindex="-1" aria-labelledby="modalEditarLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title">Alterar Revendedor</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                                                </div>
                                                <div class="modal-body">
                                                    @Html.Partial("_Editar", revendedor)
                                                </div>
                                            </div>
                                        </div>
                                    </div> 



                                    @*Esse daqui e o modal de APAGAR O REVENDEDOR (OBSERVACAO, DEVE FAZER UM JAVASCRIPT PRA CONFIRMAR REALMENTE) *@

                                    <a role="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modalApagarConfirmacao-@revendedor.Id">
                                        Apagar
                                    </a>

                                    <div class="modal fade" id="modalApagarConfirmacao-@revendedor.Id" tabindex="-1" aria-labelledby="modalApagarConfirmacaoLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title">Apagar Revendedor</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                                                </div>
                                                <div class="modal-body">
                                                    @Html.Partial("~/Views/Revendedor/ApagarConfirmacao.cshtml", revendedor)
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div> 
                            </td>
                        </tr>
                    }
                }

            </tbody>
        </table>
    </div>
</div>


